<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="general.css">
</head>
<body>
<p class="title">Holywell Green Burial Ground</p>
<hr>
<script src="phonegap.js"></script>
<script src="myfun.js"></script>
<!--<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>-->
<!--<h2>Waiting to get to a prayer place...</h2>-->
<form>
  <!-- replace hidden with text when needed for debugging -->
  <input type="hidden" name="lat">
  <input type="hidden" name="lon">
  <input type="hidden" name="mark">
</form>
<!-- <iframe id="stuff" src="null.html" width="100%" height="720"><p>Sorry your browser does not support iframe</p></iframe> -->
<div id="stuff"></div>
<script>
//alert("enter script");
document.addEventListener("deviceready", onDeviceReady, false);
//alert("first line done");
function MakeArray(n)
{
   this.length = n;
   for (var i = 1; i <= n; i++) { 
     this[i] = 0 }
   return this
}
//alert("about to set intro");
var intro =  "<h2>Not currently at a prayer place...</h2>" +
            "<p>This is all at a testing stage.</p>" +
            "<p>Please keep looking at the browser page. The prayer will come up on the screen " +
            "when you approach the spot. This particular route has closely spaced locations " +
            "and some devices with poorer GPS performance may struggle. In any case, you may need " +
            "to wait 3 or 4 minutes for your device to warm up.</p>" +
            "<hr><p>As you walk up the driveway, you will see some piles " +
            "of compost, stems and chippings. This is the first prayer point</p>";
//alert(intro);
document.getElementById("stuff").innerHTML = intro;
//alert(intro);

var nPlaces = 6;
lats = new MakeArray(nPlaces);
longs = new MakeArray(nPlaces);
texts = new MakeArray(nPlaces);
froms = new MakeArray(nPlaces);
lats[1] = 53.676103;
longs[1] = -1.868521;
texts[1] =  "<h2>Compost piles</h2>" +
            "<p>Here among the dead leaves and detritus<br>is the material for new life," +
            "<br>just as the scrapyards<br>of Sheffield and Rotherham<br>are the beginning for steelmaking:" +
            "<br>God form in us new life from our deaths,<br>new hope from our despair:" +
            "<br>regenerate our souls and our cities.<br>Teach us the lesson of" +
            "<br>the mouldering leaves<br>and of Jesus crucified and risen.</p>";
froms[1] =  "<p>From here, please head near to the back wall, past the Portaloos, to the memorial at " +
            "the top corner.</p>";            
lats[2] = 53.676496;
longs[2] = -1.868821;
texts[2] =  "<h2>The Shaw Memorial</h2>" +
            "<p>Here and looking downwards along the broad green path between the graves, at the crossing point and at " +
            "the far end, are memorials to members of the Shaw family, who owned the local mill, and built " +
            "the church. You might say their faith was convenient, as it kept the workers in order. We do " +
            "not know. But here on this memorial, the cross is displayed prominently. You cannot embrace this " +
            "faith of Christianity and ignore the cross. It is there for all of us, rich or poor.</p>" +
            "<hr><p>God help us to know Christ,<br>and him crucified, and thereby<br>delve into the depths of love," +
            "<br>know how much you love us,<br>and take on the abundant life you offer.</p>";
froms[2] =  "<p>Turn right, so you are continuing along the boundary wall. From about twenty to thirty yards along," +
            " are the graves of children in the corner plots.</p>";
lats[3] = 53.676653;
longs[3] = -1.868373;
texts[3] =  "<h2>Children's graves</h2>" +
            "<p>The deaths of children were more common in Europe before the days of antibiotics and " +
            "improved sanitation than they are now, but no easier to endure. Now, sadly, children still die, in " +
            "the West, and in greater numbers elsewhere.</p><hr><p>God of love,<br>we pray for every parent<br>" +
            "who has had to endure the death of a child.<br>Embrace them in the arms of love;<br>" +
            "give them strength to endure pain and heartbreak.<br>Hear their angry cries,<br>" +
            "help them to live again.</p>";
froms[3] =  "<p>Keep going along the wall, until you pass the end of the broad green path. In the next section of graves " +
            "on your right are two of the graveyard's three white Commonwealth War Graves Commission gravestones. " +
            "There are also other casualties of war buried in this cemetery. The grave nearest the wall, that" +
            " of S Turner, is a prayer place.</p>";
lats[4] = 53.676674;
longs[4] = -1.868051;
texts[4] =  "<h2>War Graves</h2>" +
            "<p>Living God, we mourn<br>those who have died in war.<br>Right or wrong, we are overwhelmed<br>" +
            "by the tragedy of it.<br>And we ache for peace.<br>Lord, make your peace come<br>to our world.<br>" +
            "Give strength to the peacemakers,<br>and a passion for peace to the strong.<br>" +
            "May your will be done.</p>";
froms[4] =  "<p>Now make your way to the point where the two broad green paths cross in the graveyard." +
            " Looking in the opposite" +
            " direction to the wall with the children's graves, and towards the houses, you will see some open" +
            " ground just in front of a small oak tree with a small patch of plants on it. " +
            "Depending on the time of year, poppies or snowdrops" +
            " may be in flower. This is the next point.</p>";            
lats[5] = 53.676307;
longs[5] = -1.868172;
texts[5] =  "<h2>Flower patch</h2>" +
            "<p>Here, children have planted snowdrops and poppies.</p><hr><p>God of new life, we thank you" +
            "<br>for new life springing even from death.<br>We thank you for the life of the young<br>" +
            "and of the old.<br>We thank you for the poppies that<br>sprang up on the field of battle,<br>" +
            "for organ donors, for Jesus,<br>and all that gives life, even in death.<br>" +
            "We thank you for the life of nature<br>all around us, the birds singing,<br>the trees creaking.<br>" +
            "We praise and thank you, God of life.</p>";
froms[5] =  "<p>From here, go up the hill, across the path, to an unused area beyond the two rows of graves, " +
            "behind the solitary grave of Mary Hamer".</p>";            
lats[6] = 53.676321;
longs[6] = -1.868489;
texts[6] =  "<h2>Unused ground</h2>" +
            "<p>God of all, we do not know<br>who, if anyone, will be buried here<br>in the years to come.<br>" +
            "We do not know the future,<br>but give us faith to trust you,<br>that you will be there for us<br>" +
            "whatever happens,<br>even when we walk<br>through the darkest valley.<br>In death, and in life,<br>" +
            "be our God,<br>our helper and our friend.</p>";
froms[6] =  "<p>This was the sixth and last prayer point. Please continue to make use of this burial ground for" +
            "your wonderings and wanderings.</p>";  

var form0 = document.forms[0];
form0['mark'].value = "points loaded";

//var x=document.getElementById("demo");
var tolerance = 8; //metres radius
var tsq = tolerance*tolerance;
var interval = 1000; //milliseconds
var angConv = Math.PI/180;
//var bongsrc = "hello.mp3";
var lastUpdateTime = 0;
var thisTime = 0;
var dx = 0;
var dy = 0;
var d = 0;
var dsq = 0;
var travelled = 0;
var isOpen = "false";
var anyOpen = "false";
var lastPoint = 1;
var indexOfWanted = 3;
form0['mark'].value = "performance next";
var now = Date.now();
var then = Date.now();
var timegap = 0;
form0['mark'].value = "times initialised";
var geo_options = {
  enableHighAccuracy: true, 
  maximumAge: 	      2000, 
  timeout:            2500
};
//var form0 = document.forms[0];
form0['lat'].value = "lat";
form0['lon'].value = "lon";
form0['mark'].value = "neither";
//var interval01 = window.setInterval(getLocation, 3000);

</script>
</body>
</html>
