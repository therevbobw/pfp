<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="general.css">
</head>
<body>
<!--New bit to be added to other pages starts here -->
<script src="phonegap.js"></script>
<script src="myfun.js"></script>
<!--Including the above two lines moved from lower down -->
<!-- Also remember to set form0 with getElementById! (see below) -->
<div id="modalSpace1" class="modalSpace">
     <div id="dialog1" class="dialog">
          <form><ul>
             <li>
               <button type="button" name="forward" onclick="goForward()">Go forward</button>
               <br><small class="notes">If you press the back button by accident, this corrects the mistake.
               If there is nowhere to go forward to, no action is taken.</small>
             </li>
             <hr>
             <li>
               <button type="button" name="previous" onclick="previousDirections()">Previous directions</button>
               <br><small class="notes">Look again at the directions to the place you are now near to.</small>
             </li>
             <hr>
             <li>
               <button type="button" name="next" onclick="nextDirections()">Next directions</button>
               <br><small class="notes">Look at the directions which take you to the next place.</small>
             </li>
             <hr>
             <li>
               <button type="button" name="general" onclick="showGeneralInstructions()">General instructions</button>
               <br><small class="notes">Look at the general instructions for this app..</small>
             </li>
             <hr>
             <li>
               <button type="button" name=""general"cancel" onclick="cancelMenu()">Cancel</button>
             </li>
          </ul></form>
     </div>
</div>
<div id="messageSpace" class="messageSpace">
     <div id="message" class="message">
          <div id="messageContent">
          </div>
          <form>
            <button type="button" name="messageCloser" onclick="closeMessage()">Close</button>
          </form>
     </div>
</div>

<!--New bit to be added to other pages ends here -->
<p class="title">Transpennine Trail</p>
<hr>
<!--<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>-->
<!--<h2>Waiting to get to a prayer place...</h2>-->
<form id="debuginfo">
  <!-- replace hidden with text when needed for debugging -->
  <input type="hidden" name="lat">
  <input type="hidden" name="lon">
  <input type="hidden" name="mark">
</form>
<!-- <iframe id="stuff" src="null.html" width="100%" height="720"><p>Sorry your browser does not support iframe</p></iframe> -->
<div id="stuff"></div>
<script>
document.addEventListener("deviceready", onDeviceReady, false);
document.addEventListener("menubutton", showMenu, false);
function MakeArray(n)
{
   this.length = n;
   for (var i = 1; i <= n; i++) { 
     this[i] = 0 }
   return this
}

var intro =  "<h2>Not currently at a prayer place...</h2>" +
            "<p>This is all at a testing stage.</p>" +
            "<p>Please keep looking at the browser page. The prayer will come up on the screen " +
            "when you approach the spot.</p><hr><p>The first location is the main entrance to the college.</p>";
document.getElementById("stuff").innerHTML = intro;

var nPlaces = 6;
lats = new MakeArray(nPlaces);
longs = new MakeArray(nPlaces);
texts = new MakeArray(nPlaces);
froms = new MakeArray(nPlaces);
lats[1] = 52.201024;
longs[1] = 0.105618;
texts[1] =  "<h2>Porters' Lodge</h2>" +
            "<p>And use this place as somewhere to thank God for the work of everyone who works in this college, " +
            "working day, evening and night, when the rest of this world is studying and when it is partying. " +
            "Whenever it is, someone is at work.</p>";
froms[1] =  "<p>Enter the college and follow the path to the right, and then around the corner.</p>";            
lats[2] = 52.200747;
longs[2] = 0.106005;
texts[2] =  "<h2>Dining Hall</h2>" +
            "<p>This is a good place to thank God for food, fruit of God's earth and of human labour by hand or by brain. " +
            "People in many nations produce our food, from Kenya to Canada. And many different kinds of work are " +
            "involved, agriculture, packing, transport, and unpaid work in kitchens in flats and houses. " +
            "Thank God for all of it.</p>";
froms[2] =  "<p>Continue on the path until you get to the chapel.</p>";            
lats[3] = 52.200930;
longs[3] = 0.106557;
texts[3] =  "<h2>Chapel</h2>" +
            "<p>Once again, thank God, this time for music. Pray for the grace to pray and worship God " +
            "beyond church walls. Pray in support of the chaplain, whose job may be hard in ways " +
            "we shall never know</p>";
froms[3] =  "<p>Walk out into the garden and head for the main feature in the centre of the lawn. " +
            "It consists of plants and stuff and has a path running through it.</p>"; 
lats[4] = 52.201182;
longs[4] = 0.107365;
texts[4] =  "<h2>Garden</h2>" +
            "<p>A garden is a place of beauty. But a garden is also the place where Jesus was arrested. " +
            "This is a harsh world, now as then. Jesus was taken away to be executed. And still, people " +
            "are unjustly punished, even killed. Pray for them. Pray for forgiveness, because of the hurt " +
            "each of us contributes to the world.</p>";
froms[4] =  "<p>Return to the main entrance, walk out and turn right along Grange Road. You will come to " +
            "the rugby ground.</p>";             
lats[5] = 52.202526;
longs[5] = 0.105366;
texts[5] =  "<h2>Rugby Ground</h2>" +
            "<p>Thank God for the gift of sport, and the wonder of the human body. Pray that as many people " +
            "as possible, with all levels of ability, and all kinds of disability, and at every age " +
            "may share the joy of sport.</p>";
froms[5] =  "<p>Move along the road a bit further, and look at the tower of the University Library.</p>";
lats[6] = 52.204629;
longs[6] = 0.105710;
texts[6] = "<h2>University Library</h2>" +
            "<p>This tower is visible for miles. It used to be said there was a locked upper room " +
            "in the tower where the pornography library was. In any case, the whole thing makes " +
            "a grand statement about knowledge. And quite right too. Give God thanks for knowledge, " +
            "and the freedom to pursue it. Pray for people who do not have that freedom.</p>";
froms[6] =  "<p>That is all at this stage. Return to the place you came from.</p>";
var form0 = document.getElementById("debuginfo");
form0['mark'].value = "points loaded";

//var x=document.getElementById("demo");
var tolerance = 15; //metres radius
var tsq = tolerance*tolerance;
var interval = 3000; //milliseconds
var angConv = Math.PI/180;
//var bongsrc = "hello.mp3";
var lastUpdateTime = 0;
var thisTime = 0;
var dx = 0;
var dy = 0;
var d = 0;
var dsq = 0;
var travelled = 0;
var isOpen = "false";
var anyOpen = "false";
var lastPoint = 1;
var indexOfWanted = 3;
form0['mark'].value = "performance next";
var now = Date.now();
var then = Date.now();
var timegap = 0;
form0['mark'].value = "times initialised";
var geo_options = {
  enableHighAccuracy: true, 
  maximumAge: 	      2000, 
  timeout:            2500
};
//var form0 = document.forms[0];
form0['lat'].value = "lat";
form0['lon'].value = "lon";
form0['mark'].value = "neither";
//var interval01 = window.setInterval(getLocation, 3000);

</script>
</body>
</html>
